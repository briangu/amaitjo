<html>
<head>
  <title>Web Socket Test</title>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
</head>
<body>
<script type="text/javascript">
  var socket;
  if (window.WebSocket)
  {
    socket = new WebSocket("ws://localhost:3000/websocket");
    socket.onmessage = function(event)
    {
      var insert = "<li>"+event.data+"</li>"
      $("ul").prepend(insert);
    };
    socket.onopen = function(event)
    {
      alert("Web Socket opened!");
    };
    socket.onclose = function(event)
    {
      alert("Web Socket closed.");
    };
  }
  else
  {
    alert("Your browser does not support Web Socket.");
  }

  function send(message)
  {
    if (!window.WebSocket)
    {
      return;
    }
    if (socket.readyState == WebSocket.OPEN)
    {
      socket.send(message);
    }
    else
    {
      alert("The socket is not open.");
    }
  }
</script>

<form onsubmit="return false;">
  <input type="text" name="message" value="Hello, World!"/><input type="button" value="Send Web Socket Data"
                                                                  onclick="send(this.form.message.value)"/>
</form>

<ul>
</ul>
</body>
</html>
