<html>
  <head>
    <link href="ui.css" rel="stylesheet">
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script src="mustache.js"></script> 
    <script src="jquery.js"></script> 
    
    <title>Amaitjo</title>
  </head>
  <body>
    
    <table class="layout"><tr><td>
    <table>
      <tr>
        <td>
          <div>
            <input class="button" id="purge-button" type="button" value="Purge History"/>
            <input class="button" id="iterations-panel-button" type="button" value="Show/Hide Games Panel"/>
            <input class="button" id="tail-button" type="button" value="Stop/Resume Tailing"/>
          </div>
    
          <div id="view-selector">
            <input class="button" id="view-food-button" type="button" value="Food"/>
            <input class="button" id="view-p1-button" type="button" value="P1"/>
            <input class="button" id="view-p2-button" type="button" value="P2"/>
            <input class="button view-selected" id="view-contested-button" type="button" value="P1 and P2"/>
            <input class="button" id="view-p1HomePheromone-button" type="button" value="P1 Home Ph."/>
            <input class="button" id="view-p1FoodPheromone-button" type="button" value="P1 Food Ph."/>
            <input class="button" id="view-timeline-button" type="button" value="P1 Timeline"/>
          </div>
        </td>
        <td>
          <div id="preview"></div>
        </td>
      </tr>
    </table>
    
    
    
    <div id="iterations"></div>
    
    </td><td>
    
    <div id="grid-panel">
      <div id="timeline"></div>
      <div id="moves-writes"></div>
      <div id="data"></div>
      <div id="grid"></div>
      
      <table>
        <tr>
          <th>P1</th>
          <th>Contested</th>
          <th>P2</th>
        </tr>  
        <tr>
          <td>
            <table class="results">
              <tr class="row">
              <td class="cell p1Heat1">1</td>
              <td class="cell p1Heat2">2</td>
              <td class="cell p1Heat3">3</td>
              <td class="cell p1Heat4">4</td>
              <td class="cell p1Heat5">5</td>
              <td class="cell p1Heat10">10+</td>
              <td class="cell p1Heat20">20+</td>
              <td class="cell p1Heat40">40+</td>
              <td class="cell p1Heat80">80+</td>
              <td class="cell p1Heat160">160+</td>
              <td class="cell p1Heat320">320+</td>
              <td class="cell p1Heat640">640+</td>
              <td class="cell p1Heat2560">2560+</td>
              <td class="cell p1Heat5120">5120+</td>
              </tr>
            </table>
          </td>
          <td>
            <table class="results">
              <tr class="row">
              <td class="cell contestedHeat1">1</td>
              <td class="cell contestedHeat2">2</td>
              <td class="cell contestedHeat3">3</td>
              <td class="cell contestedHeat4">4</td>
              <td class="cell contestedHeat5">5</td>
              <td class="cell contestedHeat10">10+</td>
              <td class="cell contestedHeat20">20+</td>
              <td class="cell contestedHeat40">40+</td>
              <td class="cell contestedHeat80">80+</td>
              <td class="cell contestedHeat160">160+</td>
              <td class="cell contestedHeat320">320+</td>
              <td class="cell contestedHeat640">640+</td>
              <td class="cell contestedHeat2560">2560+</td>
              <td class="cell contestedHeat5120">5120+</td>
              </tr>
            </table>
          </td>
          <td>
            <table class="results">
              <tr class="row">
              <td class="cell p2Heat1">1</td>
              <td class="cell p2Heat2">2</td>
              <td class="cell p2Heat3">3</td>
              <td class="cell p2Heat4">4</td>
              <td class="cell p2Heat5">5</td>
              <td class="cell p2Heat10">10+</td>
              <td class="cell p2Heat20">20+</td>
              <td class="cell p2Heat40">40+</td>
              <td class="cell p2Heat80">80+</td>
              <td class="cell p2Heat160">160+</td>
              <td class="cell p2Heat320">320+</td>
              <td class="cell p2Heat640">640+</td>
              <td class="cell p2Heat2560">2560+</td>
              <td class="cell p2Heat5120">5120+</td>
              </tr>
            </table>
          </td>
        </tr>  
      </table>
      
      Green: Food count - <span class="cell food">0</span>,
      Black: Ant count - <span class="cell ants">0</span>,
      Yellow Dots: Writing - <span class="cell writing">.</span>,
      Yellow Squares: Battles,
      Red/Blue O's: Nests
    </div>
  </td></tr></table>
    
    <script type="text/html" id="template-grid-p1">
      <table class="results">
        {{#rows}}
        <tr class="row">
          {{#cells}}
            {{#nest}}
              <td class="cell {{nest}}-nest" title="P1 dead={{p1Fallen}}, P2 dead={{p2Fallen}}">{{nest}}</td>
            {{/nest}}
            {{^nest}}
              {{#p1Fallen}}
                  <td class="cell p1-grave">{{p1Fallen}}</td>
              {{/p1Fallen}}
              {{^p1Fallen}}  
                <td class="cell {{fill}} {{#p1Heat}}p1Heat{{p1Heat}}{{/p1Heat}}"></td>
              {{/p1Fallen}}
            {{/nest}}
          {{/cells}}
        </tr> 
        {{/rows}}
      </table>
    </script>
    
    <script type="text/html" id="template-grid-p2">
      <table class="results">
        {{#rows}}
        <tr class="row">
          {{#cells}}
            {{#nest}}
              <td class="cell {{nest}}-nest" title="P1 dead={{p1Fallen}}, P2 dead={{p2Fallen}}">{{nest}}</td>
            {{/nest}}
            {{^nest}}
              {{#p2Fallen}}
                  <td class="cell p2-grave">{{p2Fallen}}</td>
              {{/p2Fallen}}
              {{^p2Fallen}}  
                <td class="cell {{fill}} {{#p2Heat}}p2Heat{{p2Heat}}{{/p2Heat}}"></td>
              {{/p2Fallen}}
            {{/nest}}
          {{/cells}}
        </tr> 
        {{/rows}}
      </table>
    </script>
    
    <script type="text/html" id="template-grid-food">
      <table class="results">
        {{#rows}}
        <tr class="row">
          {{#cells}}
            {{#nest}}
              <td class="cell {{nest}}-nest" title="P1 dead={{p1Fallen}}, P2 dead={{p2Fallen}}">{{nest}}</td>
            {{/nest}}
            {{^nest}}
              <td class="cell {{fill}} {{#foodheat}}foodheat{{foodheat}} {{/foodheat}}">{{#food}}<span class="food">{{food}}</span>{{/food}}</td>
            {{/nest}}
          {{/cells}}
        </tr> 
        {{/rows}}
      </table>
    </script>
    
    <script type="text/html" id="template-grid-p1HomePheromone">
      <table class="results">
        {{#rows}}
        <tr class="row">
          {{#cells}}
            {{#nest}}
              <td class="cell {{nest}}-nest" title="P1 dead={{p1Fallen}}, P2 dead={{p2Fallen}}">{{nest}}</td>
            {{/nest}}
            {{^nest}}
              <td class="cell {{fill}} {{#p1HomePheromone}}p1Heat{{p1HomePheromone}} {{/p1HomePheromone}}"></td>
            {{/nest}}
          {{/cells}}
        </tr> 
        {{/rows}}
      </table>
    </script>
    
    <script type="text/html" id="template-grid-p1FoodPheromone">
      <table class="results">
        {{#rows}}
        <tr class="row">
          {{#cells}}
            {{#nest}}
              <td class="cell {{nest}}-nest" title="P1 dead={{p1Fallen}}, P2 dead={{p2Fallen}}">{{nest}}</td>
            {{/nest}}
            {{^nest}}
              <td class="cell {{fill}} {{#p1FoodPheromone}}p2Heat{{p1FoodPheromone}} {{/p1FoodPheromone}}"></td>
            {{/nest}}
          {{/cells}}
        </tr> 
        {{/rows}}
      </table>
    </script>
    
    <script type="text/html" id="template-grid-contested">
      <table class="results">
        {{#rows}}
        <tr class="row">
          {{#cells}}
            {{#nest}}
              <td class="cell {{nest}}-nest" title="P1 dead={{p1Fallen}}, P2 dead={{p2Fallen}}">{{nest}}</td>
            {{/nest}}
            {{^nest}}
              <td class="cell {{fill}} {{#contestedHeat}}contestedHeat{{contestedHeat}}{{/contestedHeat}} {{#p2ContestedHeat}}p2Heat{{p2ContestedHeat}}{{/p2ContestedHeat}} {{#p1ContestedHeat}} p1Heat{{p1ContestedHeat}} {{/p1ContestedHeat}}"></td>
            {{/nest}}
          {{/cells}}
        </tr> 
        {{/rows}}
      </table>
    </script>
    
    <script type="text/html" id="template-grid-full">
      <table class="results">
        {{#rows}}
        <tr class="row">
          {{#cells}}
            {{#nest}}
              <td class="cell {{nest}}-nest" title="P1 dead={{p1Fallen}}, P2 dead={{p2Fallen}}">{{nest}}</td>
            {{/nest}}
            {{^nest}}
              {{#p1Fallen}}
                <td class="cell p1-grave">{{p1Fallen}}{{#p2Fallen}}<span class="p2-grave">{{p2Fallen}}</span>{{/p2Fallen}}</td>
              {{/p1Fallen}}
              
              {{^p1Fallen}}
                {{#p2Fallen}}
                  <td class="cell p2-grave">{{p2Fallen}}</td>
                {{/p2Fallen}}
              
                {{^p2Fallen}}
                    <td class="cell {{fill}} {{#contestedHeat}}contestedHeat{{contestedHeat}}{{/contestedHeat}} {{#p2Heat}}p2Heat{{p2Heat}}{{/p2Heat}} {{#p1Heat}} p1Heat{{p1Heat}} {{/p1Heat}} {{^contestedHeat}} {{^p2Heat}} {{^p1Heat}} {{#foodheat}}foodheat{{foodheat}} {{/foodheat}} {{/p1Heat}} {{/p2Heat}} {{/contestedHeat}}">{{#food}}<span class="food">{{food}}</span>{{/food}}{{#ants}}<span class="ants">{{ants}}</span>{{/ants}}{{#writing}}<span class="writing" title="{{writing}}"></span>{{/writing}}</td>
                {{/p2Fallen}}
              {{/p1Fallen}}
            {{/nest}}
          {{/cells}}
        </tr> 
        {{/rows}}
      </table>
    </script>
    
    <script type="text/html" id="template-data">
      {{#summary}}         
         <table class="panel-data">
           <tr>
             <th>Player</th>
             <th>Survivors</th>
             <th>Food</th>
             <th>moves</th>
             <th>attacks</th>
             <th>gets</th>
             <th>drops</th>
             <th>speaks</th>
             <th>writes</th>
             <th>suicides</th>
           </tr>
           
           {{#p1Stats}}
           <tr>
             <td class="p1-nest">P1:{{brain}}</td>
             <td>{{survivors}}/{{/p1Stats}}{{antsPerSide}}{{#p1Stats}}</td>
             <td>{{collectedFood}}</td>
             <td>{{moveCount}}</td>
             <td>{{successfulAttackCount}}/{{failedAttackCount}}</td>
             <td>{{successfulGetCount}}/{{failedGetCount}}</td>
             <td>{{successfulDropCount}}/{{failedDropCount}}</td>
             <td>{{speakCount}}</td>
             <td>{{writeCount}}</td>
             <td>{{stupidDeaths}}</td>
           </tr>
           {{/p1Stats}}
           
           {{#p2Stats}}
           <tr>
             <td class="p2-nest">P2:{{brain}}</td>
             <td>{{survivors}}/{{/p2Stats}}{{antsPerSide}}{{#p2Stats}}</td>
             <td>{{collectedFood}}</td>
             <td>{{moveCount}}</td>
             <td>{{successfulAttackCount}}/{{failedAttackCount}}</td>
             <td>{{successfulGetCount}}/{{failedGetCount}}</td>
             <td>{{successfulDropCount}}/{{failedDropCount}}</td>
             <td>{{speakCount}}</td>
             <td>{{writeCount}}</td>
             <td>{{stupidDeaths}}</td>
           </tr>
           {{/p2Stats}}
           
         </table>
      
      {{/summary}}
      
      
    </script>
    
    <script type="text/html" id="template-ants">
      <table class="panel-data">
        <tr>
          <th>ID</th>
          <th>food</th>
          <th>max from nest</th>
        </tr>
        <tr>
          <td>1</td>
          <td>100</td>
          <td>30</td>
        </tr>
        <tr>
          <td>2</td>
          <td>34</td>
          <td>58</td>
        </tr>
        <tr>
          <td>3</td>
          <td>450</td>
          <td>309</td>
        </tr>
      </table>
    </script>
    
    <script type="text/html" id="template-iterations">
      <table id="iterator-table" class="panel-data">
        <tr>
          <th>Game</th>
          <th>Board</th>
          <th>Ants</th>
          <th>Food</th>
          <th>Food</th>
        </tr>
        <tr class="units">
          <th>num.</th>
          <th>len./trns.</th>
          <th>P1 / P2</th>
          <th>P1 / P2</td>
          <th>Pct. Bar / Total</th>
        </tr>
        {{#iteration}}
        <tr id="{{id}}" data-id="{{id}}">
          <td>{{currentTurn}}</a></td>
          <td>{{arenaDim}}/{{maxTurns}}/{{shape}}</td>
          <td>{{p1Ants}}/{{p2Ants}}</td>
          <td>{{p1Food}}/{{p2Food}} ({{p1PctFood}}%/{{p2PctFood}}%)</td>
          <td>
            <div class="bar" style="width: {{totalFoodWidth}}px;">
                <div class="region p1" style="width: {{p1PctFood}}%;"></div>
                <div class="region p2" style="width: {{p2PctFood}}%; left: {{p1PctFood}}%;"></div>
            </div>
            {{totalFood}}
          </td>
        </tr>
        {{/iteration}}
      </table>
    </script>
    
    <script type="text/html" id="template-preview">
      <table class="results">
        {{#rows}}
        <tr class="row">
          {{#cells}}
            <td id="preview-{{top}}-{{left}}" data-top="{{top}}" data-left="{{left}}" class="preview-cell {{#heat}} contestedHeat{{heat}}{{/heat}} {{#selected}} selected-preview{{/selected}}">{{nest}}</td>
          {{/cells}}
        </tr> 
        {{/rows}}
      </table>
    </script>
   
    <script src="ui.js"></script>
        
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(runAnts);
    </script> 
    
  </body>
</html>
